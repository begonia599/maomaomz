# 翻页状态栏世界书提示词优化方案

## 优化后的提示词模板

基于你提供的示例，这是一个优化后的通用模板，用户可以根据自己的需求自定义字段：

```
#指令：回复末尾需附带状态栏。

#⚠️ 核心警告:
严禁输出任何 HTML 代码！仅输出纯文本格式。
严禁使用 XML 标签（除了 <status> 和 </status>）！
严禁在字段值中包含双引号（"）或其他特殊符号！

#格式要求：
1. 必须以 <status> 开头，</status> 结尾。
2. 第一行必须是 <-PAGEABLE_STATUSBAR->
3. 每一行内容格式必须为：{{字段名}}具体内容
4. 字段名使用双花括号包围，后面直接跟内容，中间无任何分隔符

#智能填充逻辑：
[这里根据你的具体字段添加规则]

#输出结构示例：
<status>
<-PAGEABLE_STATUSBAR->
{{字段1}}内容1
{{字段2}}内容2
{{字段3}}内容3
...
</status>
```

## 针对不同场景的建议

### 1. 时间类字段的通用规则
```
- ⛔严禁省略日期！
- 强制完整格式：YYYY年MM月DD日 + 时段 + HH:MM
- ⛔严禁包含双引号（"）
- 示例：2025年11月21日 上午 10:30
```

### 2. 描述类字段的通用规则
```
- ⛔禁止只写一个词
- 必须包含具体细节和当前状态
- 使用逗号分隔多个要素
- 示例：深蓝色制服，袖口微卷，领带松散
```

### 3. 数值类字段的通用规则
```
- ⛔严禁添加任何括号、文字注释或"已满"等描述
- 仅输出纯数值或数值+单位
- 允许数值根据剧情发展变化
- 示例：85 或 $5,000 USD
```

### 4. 状态类字段的通用规则
```
- 必须反映当前剧情状态
- 避免使用固定模板化描述
- 根据上下文智能调整
```

## 在插件中的集成建议

可以在现有的 PageableStatusBarGenerator.vue 中添加一个功能：

1. **添加"生成世界书提示词"按钮**
   - 让用户先定义好字段
   - 根据字段自动生成包含核心警告的提示词模板

2. **提示词模板生成器**
   ```javascript
   function generateWorldbookPrompt(fields) {
     return `#指令：回复末尾需附带状态栏。

#⚠️ 核心警告:
严禁输出任何 HTML 代码！仅输出纯文本格式。

#格式要求：
1. 必须以 <status> 开头，</status> 结尾。
2. 第一行必须是 <-PAGEABLE_STATUSBAR->
3. 每一行内容格式必须为：{{字段名}}具体内容

#智能填充逻辑：
${fields.map(field => `- 【${field}】：根据当前剧情填写`).join('\n')}

#输出结构示例：
<status>
<-PAGEABLE_STATUSBAR->
${fields.map(field => `{{${field}}}[根据剧情填写]`).join('\n')}
</status>

#重要提醒：
- 直接输出状态栏内容，不要任何回复语`;
   }
   ```

3. **使用流程**
   - 用户在界面上添加需要的字段（如：时间、地点、心情等）
   - 点击"生成世界书提示词"
   - 系统自动生成包含所有必要警告和格式要求的提示词
   - 用户可以复制这个提示词到世界书中使用

## 优化要点总结

1. **核心警告必须醒目** - 使用 emoji 和大写强调
2. **格式要求要清晰** - 编号列出每个要求
3. **字段保持灵活** - 不固定字段，让用户自定义
4. **示例要通用** - 使用占位符而非具体内容
5. **规则可扩展** - 用户可以根据需要添加字段规则

这样的设计既保留了灵活性，又确保了输出格式的正确性。
