$(()=>{setTimeout(()=>{let n=!1;const e=()=>{const n=$('#extensions_settings, #extensions_settings2');if(0===n.length)return console.log('æ‰©å±•è®¾ç½®åŒºåŸŸæœªæ‰¾åˆ°ï¼Œç¨åé‡è¯•...'),void setTimeout(e,1e3);if($('#maomaomz-extension-entry').length>0)return;const o=$('\n        <div id="maomaomz-extension-entry" class="extension_container" style="\n          background: rgba(74, 158, 255, 0.08);\n          border: 1px solid rgba(74, 158, 255, 0.3);\n          border-radius: 5px;\n          padding: 6px 10px;\n          margin: 5px 0;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          gap: 8px;\n        ">\n          <div style="display: flex; align-items: center; gap: 6px;">\n            <span style="font-size: 16px;">ğŸ±</span>\n            <span style="font-size: 13px; color: #aaa;">çŒ«çŒ«æ’ä»¶</span>\n          </div>\n          <button id="maomaomz-open-panel-btn" class="menu_button" style="\n            background: #4a9eff;\n            color: white;\n            border: none;\n            padding: 4px 10px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 12px;\n            transition: all 0.2s;\n          ">\n            æ‰“å¼€\n          </button>\n        </div>\n      ');n.first().prepend(o),$('#maomaomz-open-panel-btn').on('click',function(){const n=$('#memoryManagementPanel');n.length>0?(n.fadeIn(200),$('#drawer-content').removeClass('openDrawer'),window.toastr?.success('ğŸ± é¢æ¿å·²æ‰“å¼€ï¼','',{timeOut:2e3})):window.toastr?.error('é¢æ¿æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•','é”™è¯¯')}),$('#maomaomz-open-panel-btn').on('mouseenter',function(){$(this).css({background:'#5ab0ff',transform:'scale(1.05)'})}).on('mouseleave',function(){$(this).css({background:'#4a9eff',transform:'scale(1)'})}),console.log('âœ… æ‰©å±•è®¾ç½®å…¥å£å·²æ·»åŠ ')};e(),$(document).on('click','#extensionsMenuButton, [data-tab="extensions"]',()=>{setTimeout(e,300)});const o=()=>{if(!n){n=!0;try{const e=['#top-bar','#top-settings-holder','#topBar','.topBar','#navbar','.navbar','header','.header','#header','.top_header','.navigation'];let t=$(),s='';for(const n of e){const e=$(n);if(e.length>0){t=e,s=n,console.log(`æ‰¾åˆ°å¯¼èˆªæ : ${n}`);break}}if(0===t.length)return console.log('æœªæ‰¾åˆ°å¯¼èˆªæ ï¼Œ500msåé‡è¯•...'),void setTimeout(o,500);console.log(`ä½¿ç”¨å¯¼èˆªæ : ${s}`);const r=$('#memoryNavButton');r.length>0&&(console.log('mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚å¯¼èˆªæŒ‰é’®å·²å­˜åœ¨ï¼Œç§»é™¤åé‡æ–°æ·»åŠ '),r.remove());let l=t;if('#top-bar'===s){const n=$('#top-settings-holder');n.length>0&&(l=n,console.log('ä½¿ç”¨ top-settings-holder ä½œä¸ºå®¹å™¨'))}const a=$('<div id="memoryNavButton" class="interactable" style="\n            padding: 8px;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n            color: inherit;\n            border-radius: 4px;\n            transition: background 0.2s;\n            position: relative;\n          " title="mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚">\n            <span style="font-size: 24px">ğŸ±</span>\n          </div>');if(console.log('ç›®æ ‡å®¹å™¨ç±»å‹:',l[0]?.id||'æœªæŒ‡å®š'),console.log('ç›®æ ‡å®¹å™¨HTML:',l[0]?.outerHTML?.substring(0,300)),'top-settings-holder'===l[0]?.id){console.log('æ·»åŠ åˆ° top-settings-holder æœ€å‰é¢');const n=l.children().first();n.length>0?a.insertBefore(n):l.prepend(a)}else console.log('æ·»åŠ åˆ°å®¹å™¨å‰é¢'),l.prepend(a);a.on('click',function(n){n.preventDefault(),n.stopPropagation(),console.log('ç‚¹å‡»mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚å¯¼èˆªæŒ‰é’®');const e=$('#memoryManagementPanel');e.length>0?e.is(':visible')?e.fadeOut(200):e.fadeIn(200):toastr.error('æµ®åŠ¨é¢æ¿æœªåŠ è½½')}),a.on('mouseenter',function(){$(this).css('background','rgba(255, 255, 255, 0.1)')}).on('mouseleave',function(){$(this).css('background','transparent')}),console.log('mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚å¯¼èˆªæŒ‰é’®å·²æ·»åŠ åˆ°:',l[0]?.id||'å®¹å™¨'),console.log('æŒ‰é’®ä½ç½®:',a[0]?.parentElement?.children?.[0]?.className||'å·²æ·»åŠ '),console.log('æŒ‰é’®å…ƒç´ :',a[0]),console.log('é¢æ¿å®¹å™¨é•¿åº¦:',$('#memoryManagementPanel').length),n=!1}catch(e){console.error('æ·»åŠ å¯¼èˆªæŒ‰é’®å¤±è´¥:',e),n=!1,setTimeout(o,500)}}};if(o(),setInterval(()=>{0!==$('#memoryNavButton').length||n||(console.log('æ£€æµ‹åˆ°æŒ‰é’®æ¶ˆå¤±ï¼Œé‡æ–°æ·»åŠ ...'),o())},2e3),'undefined'!=typeof SillyTavern&&SillyTavern.eventSource)try{SillyTavern.eventSource.on(SillyTavern.eventTypes.CHAT_CHANGED,()=>{console.log('èŠå¤©å˜åŒ–ï¼Œæ£€æŸ¥æŒ‰é’®...'),setTimeout(()=>{0!==$('#memoryNavButton').length||n||(console.log('èŠå¤©å˜åŒ–åæŒ‰é’®æ¶ˆå¤±ï¼Œé‡æ–°æ·»åŠ ...'),o())},500)})}catch(t){console.log('æ— æ³•ç›‘å¬äº‹ä»¶:',t)}else if(void 0!==window.TavernHelper&&'function'==typeof window.TavernHelper.eventOn)try{const e=window.TavernHelper,t=window.tavern_events;e.eventOn(t.CHAT_CHANGED,()=>{console.log('èŠå¤©å˜åŒ–ï¼Œæ£€æŸ¥æŒ‰é’®...'),setTimeout(()=>{0!==$('#memoryNavButton').length||n||(console.log('èŠå¤©å˜åŒ–åæŒ‰é’®æ¶ˆå¤±ï¼Œé‡æ–°æ·»åŠ ...'),o())},500)})}catch(t){console.log('æ— æ³•ç›‘å¬äº‹ä»¶:',t)}},300)});
//# sourceMappingURL=æ·»åŠ å¯¼èˆªæŒ‰é’®.D88tp7So.chunk.js.map
